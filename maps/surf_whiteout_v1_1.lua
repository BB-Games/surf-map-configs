SURF.Payout = 4500
SURF.disableNoRunZones = true

SURF.TrialVectors = {
	Vector(-8306.7568359375, -14063.013671875, 15680.03125),
	{
		{
			Vector(-8728.107421875, -13823.880859375, 15680.03125),
			Vector(-8728.03125, -13412.609375, 15680.853515625),
			Vector(-9139.57421875, -13823.96875, 15682.297851563),
			Vector(-8728.107421875, -13823.880859375, 15680.03125)
		},
		{
			Vector(-7656.1479492188, -13823.85546875, 15680.03125),
			Vector(-7244.3671875, -13823.96875, 15680.4140625),
			Vector(-7655.96875, -13411.786132813, 15680.028320313),
			Vector(-7656.1479492188, -13823.85546875, 15680.03125),
		},
	},
	useAdvancedMesh = true,
	targetZHeight = 15759.915039063
}


CubeLines = {
	{Vector(-8186.78515625, -14207.446289063, 15680.03125),Vector(-9424.728515625,2977.8425292969,15360.03125),Vector(-9020.95703125,3199.2883300781,16255.96875)},
	{Vector(-9252.7021484375,3122.7961425781,15360.03125),{{Vector(14399.040039063,12446.756835938,10496.03125),Vector(14202.728515625,11971.129882813,11455.96875)},{Vector(-7808.509765625, 1884.8328857422, 10464.424804688),Vector(-8375.9111328125, 2603.7658691406, 10896.62890625)}}},
	{Vector(14295.970703125,12188.65625,10496.03125),Vector(-10983.046875,-15051.153320313,4864.03125),Vector(-10585.138671875,-15430.435546875,5331.1831054688)},
	{Vector(-10761.299804688,-15133.893554688,4864.03125),Vector(-190.51240539551,10109.252929688,5024.03125),Vector(219.96934509277,9919.3857421875,5759.96875)},
	{Vector(1.2480322122574,10038.944335938,5024.03125),Vector(-8001.9624023438,14786.97265625,-1279.96875),Vector(-8372.673828125,14968.611328125,-512.03125)},
	{Vector(-8189.3403320313,14873.000976563,-1279.96875),Vector(-8820.857421875,-12414.643554688,-5527.5244140625),Vector(-7543.34375,-12692.315429688,-2048.03125)},
}

EntCleanup = {
	"point_servercommand",
	"env_lightglow",
}

local blockPositions = {
	{Vector(-8470.9091796875, -2889.802734375, 14000.581055), Vector(-7916.5107421875, -2886.68359375, 14477.145507813)},
	{Vector(-9504.03125, 2240.3503417969, 15353.458984375), Vector(-8944.5087890625, 2251.580078125, 15881.360351563)},
	{Vector(-14719.103515625, 13407.96875, 13471.180664063), Vector(-14720.03125, 13982.911132813, 13972.543945313)},
	{Vector(-3713.9978027344, 13984.03125, 13469.94921875), Vector(-3711.96875, 13410.265625, 13973.751953125)},
	{Vector(-8766.37890625, 1887.96875, 10490.849609375), Vector(-8768.03125, 2461.9736328125, 10999.053710938)},
	{Vector(15166.590820313, 12448.03125, 10493.907226563), Vector(15168.03125, 11875.225585938, 10998.467773438)},
	{Vector(-11040.03125, 188.62088012695, 2362.0048828125), Vector(-10474.5859375, 192.03115844727, 2879.3647460938)},
	{Vector(288.03125, 9154.158203125, 5019.6801757813), Vector(-281.1533203125, 9151.96875, 5730.6005859375)},
	{Vector(288.03125, 641.98150634766, 1148.6097412109), Vector(-284.83209228516, 639.96881103516, 1659.7639160156)},
	{Vector(-8480.03125, 15742.395507813, -1285.876953125), Vector(-7912.4057617188, 15744.03125, -873.2099609375)}
}

local stepAutohopZones = {
	{Vector(-8617.4521484375, -4344.4189453125, 13294.774414063), Vector(-7822.4116210938, -3929.7631835938, 14604.094726563), maxHops = 2, enabled = true},
	{Vector(-9547.96484375, 3199.9030761719, 15360.03125), Vector(-8734.46875,3974.1193847656,15552.702148438)},
	{Vector(-13326.485351563, 13092.455078125, 13306.052734375), Vector(-13598.2734375, 14325.211914063, 13898.73828125), maxHops = 2, enabled = true},
	{Vector(13518.169921875,11393.168945313,10496.03125), Vector(14208.609375,12888.073242,10896.03125)},
	{Vector(-5089.5356445313, 13092.455078125, 13306.052734375), Vector(-4950, 14325.211914063, 13898.73828125), maxHops = 2, enabled = true},
	{Vector(-7008.45703125,2925.90234375,10496.03125), Vector(-7808.1860351563, 1535.1240234375,10896.03125)},
	{Vector(-11939.29296875, -1099.5329589844, 2285.9108886719), Vector(-9815.536132813, -944.93377685547, 2820.1677246094), maxHops = 2, enabled = true},
	{Vector(1177.88040161133,10111.778320313,4724.03125), Vector(-1573.03692626953,10512.857421875,5524.03125)},
	{Vector(538.95495605469, 1918.609375, 872.02911376953), Vector(-434.33697509766, 1084.7775878906, 1500.16906738281), maxHops = 1, enabled = true},
	{Vector(-6718.835449 ,14784.3203125,-1679.96875), Vector(-9348.309570,13785.311523438,-637.96875)}
}


local function AddNoCompleteAreas()
	local e = ents.Create("surf_completeonlyarea")
	e:SetTriggerPosition(Vector(-7998.8208007813, -14654.125, 15680.03125), Vector(-8383.4208984375, -14895.96875, 15801.538085938))
	e:SetCustomData({1})
	e:Spawn()

	local e = ents.Create("surf_completeonlyarea")
	e:SetTriggerPosition(Vector(10335.884765625, 10951.974609375, 13856.03125),Vector(9884.876953125, 11327.5234375, 14356.03125))
	e:SetCustomData({1})
	e:Spawn()

	for k, v in ipairs(blockPositions) do
		local blockZone = ents.Create("surf_blockzone")
		blockZone:SetTriggerPosition(v[1], v[2])
		blockZone:SetPos(v[1])
		blockZone:Spawn()
	end

	-- This fixes (temporarily) stage 1 to stage 2. It causes the inverse problem where going from S2 to S1 however will cause players to get stuck
	local tempfix = ents.FindByName("td_stage2")[1]
	tempfix:SetPos(tempfix:GetPos() + Vector(0, 0, 1))

	SURF.CreateAutohopStepZones(stepAutohopZones)
end
hook.Add("InitPostEntity", "NOTOUCHY!", AddNoCompleteAreas)

BB.Modules.Enable("material_override")
hook.Add("BBase.DataHandlesLoaded", "fixdumbwhite", function(objPlayer)
	BB.HideMaterial(objPlayer, "propper/surf_whitewater/white", false)
end)


SURF.bonusZones = {
	Vector(10123.803710938, 11024.00390625, 13856.03125)
}

SURF.splitInfo = {
	{Vector(-8383.615234375, -3840.03125, 14078.544921875), Vector(-7993.9389648438, -3222.4672851563, 14426.177734375), target = 1, type = 'end'},
	{Vector(-9547.96484375, 3199.9030761719, 15360.03125), Vector(-8734.46875,3974.1193847656,15552.702148438), target = 2, type = 'start'},
	{Vector(-13760.052734375,13887.977539063,13472.03125), Vector(-14264.036132813, 13493.412109375, 13805.439453125), target = 2, type = 'end'},
	{Vector(-4671.0834960938,13888.08984375,13472.03125), Vector(-4142.0634765625, 13473.2578125, 13837.231445313), target = 2, type = 'end'},
	{Vector(13518.169921875,11393.168945313,10496.03125), Vector(14208.609375,12888.073242,10896.03125), target = 3, type = 'start'},
	{Vector(-7008.45703125,2925.90234375,10496.03125), Vector(-7808.1860351563, 1535.1240234375,10896.03125), target = 3, type = 'start'},
	{Vector(-10915.971679688,-15136.232421875,4864.03125), Vector(-10578.899414063,-15458.85546875,5163.5185546875), target = 3, type = 'end'},
	{Vector(-10982.131835938,-15042.610351563,4864.03125), Vector(-10519.40625,-14540.6953125,5264.03125), target = 4, type = 'start'},
	{Vector(-10943.731445313,-767.88842773438,2368.03125), Vector(-10535.6015625,-183.36212158203,2768.4887695313), target = 4, type = 'end'},
	{Vector(1177.88040161133,10111.778320313,4724.03125), Vector(-1573.03692626953,10512.857421875,5524.03125), target = 5, type = 'start'},
	{Vector(500.73364257813,1597.5885009766,1152.03125), Vector(-500.54780578613,1001.337890625,1563.8803710938), target = 5, type = 'end'},
	{Vector(-6718.835449 ,14784.3203125,-1679.96875), Vector(-9348.309570,13785.311523438,-637.96875), target = 6, type = 'start'},
}
